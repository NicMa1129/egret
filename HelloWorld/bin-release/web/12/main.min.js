var BreathImage=function(t){function e(e,i,n){void 0===i&&(i=2e3),void 0===n&&(n=.05),t.call(this,e),this._duration=i,this._offset=n,this.init()}__extends(e,t);var i=__define,n=e,s=n.prototype;return s.init=function(){this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2},s.play=function(){this.t=0,egret.Tween.get(this,{loop:!0}).to({t:2*Math.PI},this._duration)},i(s,"t",function(){return this._t},function(t){this._t=t,this.scaleX=Math.sin(t)*this._offset+1,this.scaleY=Math.sin(t-Math.PI/2)*this._offset+1}),e}(egret.Bitmap);egret.registerClass(BreathImage,"BreathImage");var DanMu=function(t){function e(){t.call(this),this.createView()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createView=function(){var t=this.createBitmapByName("bg");this.addChild(t),this.init()},n.init=function(){this._item=new Array;var t=this.createBitmapByName("menu1");t.x=0,t.y=100,this._item.push(t),this.addChild(t);var e=this.createBitmapByName("menu2");e.x=150,e.y=200,this._item.push(e),this.addChild(e);var i=this.createBitmapByName("menu3");i.x=300,i.y=350,this._item.push(i),this.addChild(i),this.touchEnabled=!0},n.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e}(egret.Sprite);egret.registerClass(DanMu,"DanMu");var DanMuStep=function(t){function e(){t.call(this),this._item=["11111111111","22222222222","33333333333"],this._moveStep=5,this.createView()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createView=function(){var t=this.createBitmapByName("bg");this.addChild(t),this.initScreen()},n.initScreen=function(){this._danmu=new DanMu,this._danmu.name="danmu",this._danmu.x=640,this._danmu.y=100,this._danmu.width=1920,this._danmu.height=400,this.lastItem=this._danmu.getChildByName("item3"),this.addChild(this._danmu),this._danmu.addEventListener(egret.Event.ENTER_FRAME,this.onMoveDanMu,this)},n.onMoveDanMu=function(){this._danmu.x-=this._moveStep,this._danmu.x<-640&&(this._danmu.x=640)},n.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e}(egret.DisplayObjectContainer);egret.registerClass(DanMuStep,"DanMuStep");var Draw=function(t){function e(){t.call(this),this.touchFirst=!0,this.touchStatus=!1,this.init()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.init=function(){this.graphics.beginFill(16777215,1),this.graphics.drawRect(0,0,500,500),this.graphics.endFill(),console.log("x = "+this.anchorOffsetX),console.log("y = "+this.anchorOffsetY),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this)},n.touchBegin=function(t){this.touchFirst=!1,this.touchStatus=!0,this.beginPoint=new egret.Point,this.beginPoint.x=t.stageX,this.beginPoint.y=t.stageY,this.graphics.moveTo(this.beginPoint.x,this.beginPoint.y),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},n.touchMove=function(t){this.touchStatus&&(this.graphics.beginFill(0),this.graphics.lineStyle(2,0),this.graphics.lineTo(t.stageX,t.stageY),this.graphics.endFill())},n.touchEnd=function(t){this.touchStatus=!1,this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},n.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},n.reDraw=function(){this.graphics.clear(),this.init()},e}(egret.Shape);egret.registerClass(Draw,"Draw");var DrawStep=function(t){function e(){t.call(this),this.createView()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createView=function(){var t=this.createBitmapByName("bg");t.x=0,t.y=0,this.addChild(t),this._reDrawTxt=new egret.TextField,this._reDrawTxt.x=50,this._reDrawTxt.y=650,this._reDrawTxt.name="reDrawTxt",this._reDrawTxt.size=60,this._reDrawTxt.backgroundColor=0,this._reDrawTxt.textColor=0,this._reDrawTxt.text="重画",this.addChild(this._reDrawTxt),this._play=new egret.TextField,this._play.x=200,this._play.y=650,this._play.name="play",this._play.size=60,this._play.backgroundColor=0,this._play.textColor=0,this._play.text="播放",this.addChild(this._play),this._pause=new egret.TextField,this._pause.x=350,this._pause.y=650,this._pause.name="pause",this._pause.size=60,this._pause.backgroundColor=0,this._pause.textColor=0,this._pause.text="暂停",this.addChild(this._pause),this._nextStep=new egret.TextField,this._nextStep.x=50,this._nextStep.y=800,this._nextStep.name="next",this._nextStep.size=60,this._nextStep.backgroundColor=0,this._nextStep.textColor=0,this._nextStep.text="下一步",this.addChild(this._nextStep)},n.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e}(egret.Sprite);egret.registerClass(DrawStep,"DrawStep");var LoadingUI=function(t){function e(){t.call(this),this.createView()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createView=function(){this.backimg=this.createBitmapByName("bg"),this.backimg.x=0,this.backimg.y=0,this.addChild(this.backimg),this.startLoadAnimation()},n.startLoadAnimation=function(){var t=this,e=new egret.Bitmap;e.x=190,e.y=417;var i=RES.getRes("load_tv0"),n=RES.getRes("load_tv1"),s=RES.getRes("load_tv2"),a=[i,n,s];this.addChild(e);var r=0,o=function(){r++,r>=a.length&&(r=0),e.texture=a[r];var i=egret.Tween.get(e);i.to({alpha:1},10),i.wait(100),i.call(o,t)};o()},n.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},n.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(t){function e(){t.call(this),this.mainHeight=this.width,this.touchStatus=!1,this.moveStep=5,this.moveSpeed=-2,this._Direction=1,this._Speed=1,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onLoadingLoadComplete,this),RES.loadGroup("loading")},n.onLoadingLoadComplete=function(t){var e=this;"loading"==t.groupName&&(this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),this.sound=new egret.Sound,this.sound.load("resource/assets/v1.mp3"),this.sound.addEventListener(egret.Event.COMPLETE,function(){RES.loadGroup("step"),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,e.onStepLoadComplete,e)},this))},n.onStepLoadComplete=function(t){"step"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onStepLoadComplete,this),this.createGameScene())},n.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},n.onResourceProgress=function(t){"loading"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},n.createGameScene=function(){this.onShowStep1(),console.log(TMP.getQueryString("name"))},n.onShowStep1=function(){this.step1Sprite=new Step1,this.step1Sprite.onRunPenzai(),this.stage.addChild(this.step1Sprite);var t=new egret.DisplayObject;t=this.step1Sprite.getChildByName("start"),t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},n.onClick=function(t){console.log("onClick"),this.stage.removeChild(this.step1Sprite),this.drawStep=new DrawStep,this.stage.addChild(this.drawStep),this.drawShape=new Draw,this.drawShape.touchEnabled=!0,this.drawShape.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this.stage.addChild(this.drawShape);var e=this.drawStep.getChildByName("reDrawTxt");e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.reDrawShape,this);var i=this.drawStep.getChildByName("play");i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.play,this);var n=this.drawStep.getChildByName("pause");n.touchEnabled=!0,n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.pause,this);var s=this.drawStep.getChildByName("next");s.touchEnabled=!0,s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.next,this)},n.next=function(t){this.stage.removeChild(this.drawStep),this.danMuStep=new DanMuStep,this.stage.addChild(this.danMuStep)},n.reDrawShape=function(){this.drawShape.reDraw(),this.drawShape.removeEventListener(egret.Event.ENTER_FRAME,this.onFrame,this),this.drawShape.rotation=0},n.play=function(){this.drawShape.addEventListener(egret.Event.ENTER_FRAME,this.onFrame,this)},n.pause=function(){this.drawShape.removeEventListener(egret.Event.ENTER_FRAME,this.onFrame,this)},n.onFrame=function(){this.drawShape.rotation+=this._Direction*this._Speed,this.drawShape.rotation>45?this._Direction=-1:this.drawShape.rotation<-45&&(this._Direction=1)},n.touchBegin=function(t){this.touchStatus=!0,this.drawShape.touchBegin(t),this.drawShape.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},n.touchMove=function(t){this.touchStatus&&this.drawShape.touchMove(t)},n.touchEnd=function(t){this.touchStatus=!1,this.drawShape.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},n.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},n.startAnimation=function(t){},n.changeDescription=function(t,e){t.textFlow=e},e.STEP_ROT=10,e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var Main1=function(t){function e(){t.call(this),this.mainHeight=this.width,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},n.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},n.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},n.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},n.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},n.createGameScene=function(){console.log("Hellow World");var t=this.createBitmapByName("bg");t.x=0,t.y=0,this.addChild(t),console.log("backimg index = "+this.getChildIndex(t));var e=this.createBitmapByName("logo"),i=new egret.Sprite;i.x=13,i.y=17,i.addChild(e),this.addChildAt(i,2),console.log("logoSpirte index = "+this.getChildIndex(i));var n=this.createBitmapByName("tv");n.x=0,n.y=56,this.addChild(n),console.log("tv index = "+this.getChildIndex(n));var s=this.createBitmapByName("button");s.x=187,s.y=770,this.addChild(s),console.log("button index = "+this.getChildIndex(s)),this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){var e=i.getChildAt(0);e.x=t.localX,e.y-t.localY},this),RES.getResAsync("description_json",this.startAnimation,this)},n.onClick=function(t){},n.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},n.startAnimation=function(t){},n.changeDescription=function(t,e){t.textFlow=e},e}(egret.DisplayObjectContainer);egret.registerClass(Main1,"Main1");var Main2=function(t){function e(){t.call(this),this.mainHeight=this.width,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},n.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},n.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},n.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},n.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},n.createGameScene=function(){var t=new egret.Sprite;this.addChild(t),t.x=10;var e=new egret.Sprite;e.graphics.beginFill(16711680),e.graphics.drawRect(0,0,100,100),e.graphics.endFill(),e.x=50,e.name="sprite1",t.addChild(e);var i=new egret.Sprite;i.graphics.beginFill(65280),i.graphics.drawRect(0,0,100,100),i.graphics.endFill(),i.x=100,i.y=50,i.name="sprite2",t.addChild(i);var n=t.getChildByName("sprite2");n.alpha=.5,RES.getResAsync("description_json",this.startAnimation,this)},n.onClick=function(t){},n.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},n.startAnimation=function(t){},n.changeDescription=function(t,e){t.textFlow=e},e}(egret.DisplayObjectContainer);egret.registerClass(Main2,"Main2");var Move=function(t){function e(){t.call(this),this._touchStatus=!1,this._distance=new egret.Point,this.createView()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createView=function(){this._bird=new egret.Bitmap,this._bird.texture=RES.getRes("tmp"),this._bird.x=100,this._bird.y=200,this.addChild(this._bird),this._bird.touchEnabled=!0,this._bird.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this._bird.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this)},n.touchBegin=function(t){this._touchStatus=!0,this._distance.x=t.stageX-this._bird.x,this._distance.y=t.stageY-this._bird.y,this._bird.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},n.touchMove=function(t){this._touchStatus&&(this._bird.x=t.stageX-this._distance.x,this._bird.y=t.stageY-this._distance.y)},n.touchEnd=function(t){this._touchStatus=!1,this._bird.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},n.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e}(egret.Sprite);egret.registerClass(Move,"Move");var Step1=function(t){function e(){t.call(this),this._iDirection_bp=-1,this._iSpeed=2.5,this._iDirection_gg=-1,this._iDirection_pz=-1,this.createView()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createView=function(){var t=this.createBitmapByName("bg");t.x=0,t.y=0,this.addChild(t);var e=this.createBitmapByName("button");e.x=187,e.y=770,e.name="button",this.addChildAt(e,3);var i=this.createBitmapByName("logo");i.x=13,i.y=17,i.name="logo",this.addChild(i);var n=this.createBitmapByName("tv");n.x=0,n.y=56,this.addChild(n);var s=this.createBitmapByName("content_png");s.x=-344,s.y=187,s.alpha=0,this.addChild(s);var a=egret.Tween.get(s);a.to({x:86,alpha:1},1e3,egret.Ease.backInOut),a.call(this.onShowElement,this);var r=this.createBitmapByName("button");r.y=765,r.x=187,r.name="start",this.addChild(r)},n.onShowElement=function(){var t=this,e=this.createBitmapByName("baping_png");e.x=267+e.width/2,e.y=392+e.height/2,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,this.addChild(e),e.addEventListener(egret.Event.ENTER_FRAME,function(){e.rotation+=t._iDirection_bp*t._iSpeed,e.rotation>10?t._iDirection_bp=-1:e.rotation<-10&&(t._iDirection_bp=1)},this);var i=this.createBitmapByName("gungun_png");i.y=230+i.width/2,i.x=267+i.height/2,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,this.addChild(i),i.addEventListener(egret.Event.ENTER_FRAME,function(){i.rotation+=t._iDirection_gg*t._iSpeed,i.rotation>10?t._iDirection_gg=-1:i.rotation<-10&&(t._iDirection_gg=1)},this);var n=this.createBitmapByName("penzi_png");n.y=567+n.height/2,n.x=94+n.width/2,n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,this.addChild(n),n.addEventListener(egret.Event.ENTER_FRAME,function(){n.rotation+=t._iDirection_pz*t._iSpeed,n.rotation>10?t._iDirection_pz=-1:n.rotation<-10&&(t._iDirection_pz=1)},this);var s=this.createBitmapByName("text_png");s.y=717+s.height,s.x=208,s.alpha=0,this.addChild(s);var a=egret.Tween.get(s);a.to({alpha:1,y:717},1e3,egret.Ease.sineInOut)},n.onRunPenzai=function(){var t=this,e=new egret.Bitmap;e.x=307,e.y=375,e.scaleX=.6,e.scaleY=.6;var i=RES.getRes("penzai01"),n=RES.getRes("penzai02"),s=[i,n];this.addChild(e);var a=0,r=function(){a++,a>=s.length&&(a=0),e.texture=s[a];var i=egret.Tween.get(e);i.to({alpha:1},10),i.wait(500),i.call(r,t)};r()},n.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e}(egret.Sprite);egret.registerClass(Step1,"Step1");