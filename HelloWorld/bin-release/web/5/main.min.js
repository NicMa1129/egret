var BreathImage=function(t){function e(e,i,n){void 0===i&&(i=2e3),void 0===n&&(n=.05),t.call(this,e),this._duration=i,this._offset=n,this.init()}__extends(e,t);var i=__define,n=e,a=n.prototype;return a.init=function(){this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2},a.play=function(){this.t=0,egret.Tween.get(this,{loop:!0}).to({t:2*Math.PI},this._duration)},i(a,"t",function(){return this._t},function(t){this._t=t,this.scaleX=Math.sin(t)*this._offset+1,this.scaleY=Math.sin(t-Math.PI/2)*this._offset+1}),e}(egret.Bitmap);egret.registerClass(BreathImage,"BreathImage");var LoadingUI=function(t){function e(){t.call(this),this.createView()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createView=function(){this.backimg=this.createBitmapByName("bg"),this.backimg.x=0,this.backimg.y=0,this.addChild(this.backimg),this.startLoadAnimation()},n.startLoadAnimation=function(){var t=this,e=new egret.Bitmap;e.x=190,e.y=417;var i=RES.getRes("load_tv0"),n=RES.getRes("load_tv1"),a=RES.getRes("load_tv2"),s=[i,n,a];this.addChild(e);var o=0,r=function(){o++,o>=s.length&&(o=0),e.texture=s[o];var i=egret.Tween.get(e);i.to({alpha:1},10),i.wait(100),i.call(r,t)};r()},n.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},n.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(t){function e(){t.call(this),this.mainHeight=this.width,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onLoadingLoadComplete,this),RES.loadGroup("loading")},n.onLoadingLoadComplete=function(t){"loading"==t.groupName&&(this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onStepLoadComplete,this),RES.loadGroup("step"))},n.onStepLoadComplete=function(t){"step"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onStepLoadComplete,this),this.createGameScene())},n.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},n.onResourceProgress=function(t){"loading"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},n.createGameScene=function(){this.onShowStep1()},n.onShowStep1=function(){this.step1Sprite=new egret.Sprite;var t=this.createBitmapByName("bg");t.x=0,t.y=0,this.step1Sprite.addChild(t);var e=this.createBitmapByName("button");e.x=187,e.y=770,e.name="button",this.step1Sprite.addChildAt(e,3);var i=this.createBitmapByName("logo"),n=new egret.Sprite;n.x=13,n.y=17,n.name="logoSprite",n.addChild(i),this.step1Sprite.addChild(n);var a=this.createBitmapByName("tv");a.x=0,a.y=56,this.step1Sprite.addChild(a);var s=this.createBitmapByName("content_png");s.x=-344,s.y=187,s.alpha=0,this.step1Sprite.addChild(s),console.log("content index = "+this.getChildIndex(s));var o=egret.Tween.get(s);o.to({x:86,alpha:1},1e3,egret.Ease.backInOut),o.call(this.onShowElement,this),this.onRunPenzai(),this.stage.addChild(this.step1Sprite)},n.onRunPenzai=function(){var t=this.step1Sprite,e=new egret.Bitmap;e.x=307,e.y=375,e.scaleX=.6,e.scaleY=.6;var i=RES.getRes("penzai01"),n=RES.getRes("penzai02"),a=[i,n];this.step1Sprite.addChild(e);var s=0,o=function(){s++,s>=a.length&&(s=0),e.texture=a[s];var i=egret.Tween.get(e);i.to({alpha:1},10),i.wait(300),i.call(o,t)};o()},n.onShowElement=function(){var t=this.createBitmapByName("baping_png");t.x=267,t.y=392,this.step1Sprite.addChild(t);var e=this.createBitmapByName("gungun_png");e.y=245,e.x=254,this.step1Sprite.addChild(e);var i=this.createBitmapByName("penzi_png");i.y=567,i.x=94,this.step1Sprite.addChild(i)},n.onClick=function(t){},n.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},n.startAnimation=function(t){},n.changeDescription=function(t,e){t.textFlow=e},e.STEP_ROT=10,e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");