var BreathImage=function(e){function t(t,i,n){void 0===i&&(i=2e3),void 0===n&&(n=.05),e.call(this,t),this._duration=i,this._offset=n,this.init()}__extends(t,e);var i=__define,n=t,r=n.prototype;return r.init=function(){this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2},r.play=function(){this.t=0,egret.Tween.get(this,{loop:!0}).to({t:2*Math.PI},this._duration)},i(r,"t",function(){return this._t},function(e){this._t=e,this.scaleX=Math.sin(e)*this._offset+1,this.scaleY=Math.sin(e-Math.PI/2)*this._offset+1}),t}(egret.Bitmap);egret.registerClass(BreathImage,"BreathImage");var Draw=function(e){function t(){e.call(this),this.touchFirst=!0,this.touchStatus=!1,this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){this.graphics.beginFill(14469577,1),this.graphics.drawRect(50,50,500,500),this.graphics.endFill(),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this)},n.touchBegin=function(e){this.touchFirst=!1,this.touchStatus=!0,this.beginPoint=new egret.Point,this.beginPoint.x=e.stageX,this.beginPoint.y=e.stageY,this.graphics.moveTo(this.beginPoint.x,this.beginPoint.y),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},n.touchMove=function(e){this.touchStatus&&(this.graphics.beginFill(0),this.graphics.lineStyle(2,0),this.graphics.lineTo(e.stageX,e.stageY),this.graphics.endFill())},n.touchEnd=function(e){this.touchStatus=!1,this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},n.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},n.reDraw=function(){this.graphics.clear(),this.init()},t}(egret.Shape);egret.registerClass(Draw,"Draw");var DrawStep=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createView=function(){var e=this.createBitmapByName("bg");e.x=0,e.y=0,this.addChild(e),this._reDrawTxt=new egret.TextField,this._reDrawTxt.x=50,this._reDrawTxt.y=650,this._reDrawTxt.name="reDrawTxt",this._reDrawTxt.size=60,this._reDrawTxt.backgroundColor=0,this._reDrawTxt.textColor=0,this._reDrawTxt.text="重画",this.addChild(this._reDrawTxt)},n.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t}(egret.Sprite);egret.registerClass(DrawStep,"DrawStep");var LoadingUI=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createView=function(){this.backimg=this.createBitmapByName("bg"),this.backimg.x=0,this.backimg.y=0,this.addChild(this.backimg),this.startLoadAnimation()},n.startLoadAnimation=function(){var e=this,t=new egret.Bitmap;t.x=190,t.y=417;var i=RES.getRes("load_tv0"),n=RES.getRes("load_tv1"),r=RES.getRes("load_tv2"),s=[i,n,r];this.addChild(t);var o=0,a=function(){o++,o>=s.length&&(o=0),t.texture=s[o];var i=egret.Tween.get(t);i.to({alpha:1},10),i.wait(100),i.call(a,e)};a()},n.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},n.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(e){function t(){e.call(this),this.mainHeight=this.width,this.touchStatus=!1,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onAddToStage=function(e){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onLoadingLoadComplete,this),RES.loadGroup("loading")},n.onLoadingLoadComplete=function(e){var t=this;"loading"==e.groupName&&(this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),this.sound=new egret.Sound,this.sound.load("resource/assets/v1.mp3"),this.sound.addEventListener(egret.Event.COMPLETE,function(){RES.loadGroup("step"),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,t.onStepLoadComplete,t)},this))},n.onStepLoadComplete=function(e){"step"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onStepLoadComplete,this),this.createGameScene())},n.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},n.onResourceProgress=function(e){"loading"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},n.createGameScene=function(){this.onShowStep1()},n.onShowStep1=function(){this.sound.play(),this.step1Sprite=new Step1,this.step1Sprite.onRunPenzai(),this.stage.addChild(this.step1Sprite);var e=new egret.DisplayObject;e=this.step1Sprite.getChildByName("start"),e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},n.onClick=function(e){console.log("onClick"),this.stage.removeChild(this.step1Sprite),this.drawStep=new DrawStep,this.stage.addChild(this.drawStep),this.drawShape=new Draw,this.drawShape.touchEnabled=!0,this.drawShape.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this.stage.addChild(this.drawShape);var t=this.drawStep.getChildByName("reDrawTxt");t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.reDrawShape,this)},n.reDrawShape=function(){this.drawShape.reDraw()},n.touchBegin=function(e){this.touchStatus=!0,this.drawShape.touchBegin(e),this.drawShape.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},n.touchMove=function(e){this.touchStatus&&this.drawShape.touchMove(e)},n.touchEnd=function(e){this.touchStatus=!1,this.drawShape.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},n.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},n.startAnimation=function(e){},n.changeDescription=function(e,t){e.textFlow=t},t.STEP_ROT=10,t}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var Main1=function(e){function t(){e.call(this),this.mainHeight=this.width,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onAddToStage=function(e){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},n.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},n.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},n.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},n.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},n.createGameScene=function(){console.log("Hellow World");var e=this.createBitmapByName("bg");e.x=0,e.y=0,this.addChild(e),console.log("backimg index = "+this.getChildIndex(e));var t=this.createBitmapByName("logo"),i=new egret.Sprite;i.x=13,i.y=17,i.addChild(t),this.addChildAt(i,2),console.log("logoSpirte index = "+this.getChildIndex(i));var n=this.createBitmapByName("tv");n.x=0,n.y=56,this.addChild(n),console.log("tv index = "+this.getChildIndex(n));var r=this.createBitmapByName("button");r.x=187,r.y=770,this.addChild(r),console.log("button index = "+this.getChildIndex(r)),this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){var t=i.getChildAt(0);t.x=e.localX,t.y-e.localY},this),RES.getResAsync("description_json",this.startAnimation,this)},n.onClick=function(e){},n.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},n.startAnimation=function(e){},n.changeDescription=function(e,t){e.textFlow=t},t}(egret.DisplayObjectContainer);egret.registerClass(Main1,"Main1");var Main2=function(e){function t(){e.call(this),this.mainHeight=this.width,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onAddToStage=function(e){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},n.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},n.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},n.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},n.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},n.createGameScene=function(){var e=new egret.Sprite;this.addChild(e),e.x=10;var t=new egret.Sprite;t.graphics.beginFill(16711680),t.graphics.drawRect(0,0,100,100),t.graphics.endFill(),t.x=50,t.name="sprite1",e.addChild(t);var i=new egret.Sprite;i.graphics.beginFill(65280),i.graphics.drawRect(0,0,100,100),i.graphics.endFill(),i.x=100,i.y=50,i.name="sprite2",e.addChild(i);var n=e.getChildByName("sprite2");n.alpha=.5,RES.getResAsync("description_json",this.startAnimation,this)},n.onClick=function(e){},n.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},n.startAnimation=function(e){},n.changeDescription=function(e,t){e.textFlow=t},t}(egret.DisplayObjectContainer);egret.registerClass(Main2,"Main2");var Move=function(e){function t(){e.call(this),this._touchStatus=!1,this._distance=new egret.Point,this.createView()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createView=function(){this._bird=new egret.Bitmap,this._bird.texture=RES.getRes("tmp"),this._bird.x=100,this._bird.y=200,this.addChild(this._bird),this._bird.touchEnabled=!0,this._bird.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this._bird.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this)},n.touchBegin=function(e){this._touchStatus=!0,this._distance.x=e.stageX-this._bird.x,this._distance.y=e.stageY-this._bird.y,this._bird.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},n.touchMove=function(e){this._touchStatus&&(this._bird.x=e.stageX-this._distance.x,this._bird.y=e.stageY-this._distance.y)},n.touchEnd=function(e){this._touchStatus=!1,this._bird.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},n.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t}(egret.Sprite);egret.registerClass(Move,"Move");var Step1=function(e){function t(){e.call(this),this._iDirection_bp=-1,this._iSpeed=2.5,this._iDirection_gg=-1,this._iDirection_pz=-1,this.createView()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createView=function(){var e=this.createBitmapByName("bg");e.x=0,e.y=0,this.addChild(e);var t=this.createBitmapByName("button");t.x=187,t.y=770,t.name="button",this.addChildAt(t,3);var i=this.createBitmapByName("logo");i.x=13,i.y=17,i.name="logo",this.addChild(i);var n=this.createBitmapByName("tv");n.x=0,n.y=56,this.addChild(n);var r=this.createBitmapByName("content_png");r.x=-344,r.y=187,r.alpha=0,this.addChild(r);var s=egret.Tween.get(r);s.to({x:86,alpha:1},1e3,egret.Ease.backInOut),s.call(this.onShowElement,this);var o=this.createBitmapByName("button");o.y=765,o.x=187,o.name="start",this.addChild(o)},n.onShowElement=function(){var e=this,t=this.createBitmapByName("baping_png");t.x=267+t.width/2,t.y=392+t.height/2,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,this.addChild(t),t.addEventListener(egret.Event.ENTER_FRAME,function(){t.rotation+=e._iDirection_bp*e._iSpeed,t.rotation>10?e._iDirection_bp=-1:t.rotation<-10&&(e._iDirection_bp=1)},this);var i=this.createBitmapByName("gungun_png");i.y=230+i.width/2,i.x=267+i.height/2,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,this.addChild(i),i.addEventListener(egret.Event.ENTER_FRAME,function(){i.rotation+=e._iDirection_gg*e._iSpeed,i.rotation>10?e._iDirection_gg=-1:i.rotation<-10&&(e._iDirection_gg=1)},this);var n=this.createBitmapByName("penzi_png");n.y=567+n.height/2,n.x=94+n.width/2,n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,this.addChild(n),n.addEventListener(egret.Event.ENTER_FRAME,function(){n.rotation+=e._iDirection_pz*e._iSpeed,n.rotation>10?e._iDirection_pz=-1:n.rotation<-10&&(e._iDirection_pz=1)},this);var r=this.createBitmapByName("text_png");r.y=717+r.height,r.x=208,r.alpha=0,this.addChild(r);var s=egret.Tween.get(r);s.to({alpha:1,y:717},1e3,egret.Ease.sineInOut)},n.onRunPenzai=function(){var e=this,t=new egret.Bitmap;t.x=307,t.y=375,t.scaleX=.6,t.scaleY=.6;var i=RES.getRes("penzai01"),n=RES.getRes("penzai02"),r=[i,n];this.addChild(t);var s=0,o=function(){s++,s>=r.length&&(s=0),t.texture=r[s];var i=egret.Tween.get(t);i.to({alpha:1},10),i.wait(500),i.call(o,e)};o()},n.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t}(egret.Sprite);egret.registerClass(Step1,"Step1");