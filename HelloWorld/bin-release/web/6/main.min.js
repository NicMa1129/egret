var BreathImage=function(e){function t(t,i,n){void 0===i&&(i=2e3),void 0===n&&(n=.05),e.call(this,t),this._duration=i,this._offset=n,this.init()}__extends(t,e);var i=__define,n=t,o=n.prototype;return o.init=function(){this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2},o.play=function(){this.t=0,egret.Tween.get(this,{loop:!0}).to({t:2*Math.PI},this._duration)},i(o,"t",function(){return this._t},function(e){this._t=e,this.scaleX=Math.sin(e)*this._offset+1,this.scaleY=Math.sin(e-Math.PI/2)*this._offset+1}),t}(egret.Bitmap);egret.registerClass(BreathImage,"BreathImage");var LoadingUI=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createView=function(){this.backimg=this.createBitmapByName("bg"),this.backimg.x=0,this.backimg.y=0,this.addChild(this.backimg),this.startLoadAnimation()},n.startLoadAnimation=function(){var e=this,t=new egret.Bitmap;t.x=190,t.y=417;var i=RES.getRes("load_tv0"),n=RES.getRes("load_tv1"),o=RES.getRes("load_tv2"),r=[i,n,o];this.addChild(t);var s=0,a=function(){s++,s>=r.length&&(s=0),t.texture=r[s];var i=egret.Tween.get(t);i.to({alpha:1},10),i.wait(100),i.call(a,e)};a()},n.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},n.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(e){function t(){e.call(this),this.mainHeight=this.width,this._iDirection_bp=-1,this._iSpeed=2.5,this._iDirection_gg=-1,this._iDirection_pz=-1,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onAddToStage=function(e){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onLoadingLoadComplete,this),RES.loadGroup("loading")},n.onLoadingLoadComplete=function(e){"loading"==e.groupName&&(this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onStepLoadComplete,this),RES.loadGroup("step"),this.sound=new egret.Sound,this.sound.load("resource/assets/v1.mp3"))},n.onStepLoadComplete=function(e){"step"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onStepLoadComplete,this),this.createGameScene())},n.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},n.onResourceProgress=function(e){"loading"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},n.createGameScene=function(){this.onShowStep1()},n.onShowStep1=function(){var e=this;this.sound.addEventListener(egret.Event.COMPLETE,function(){e.sound.play()},this),this.step1Sprite=new egret.Sprite;var t=this.createBitmapByName("bg");t.x=0,t.y=0,this.step1Sprite.addChild(t);var i=this.createBitmapByName("button");i.x=187,i.y=770,i.name="button",this.step1Sprite.addChildAt(i,3);var n=this.createBitmapByName("logo"),o=new egret.Sprite;o.x=13,o.y=17,o.name="logoSprite",o.addChild(n),this.step1Sprite.addChild(o);var r=this.createBitmapByName("tv");r.x=0,r.y=56,this.step1Sprite.addChild(r);var s=this.createBitmapByName("content_png");s.x=-344,s.y=187,s.alpha=0,this.step1Sprite.addChild(s);var a=egret.Tween.get(s);a.to({x:86,alpha:1},1e3,egret.Ease.backInOut),a.call(this.onShowElement,this);var h=this.createBitmapByName("button");h.y=765,h.x=187,this.step1Sprite.addChild(h),this.onRunPenzai(),this.stage.addChild(this.step1Sprite)},n.onRunPenzai=function(){var e=this.step1Sprite,t=new egret.Bitmap;t.x=307,t.y=375,t.scaleX=.6,t.scaleY=.6;var i=RES.getRes("penzai01"),n=RES.getRes("penzai02"),o=[i,n];this.step1Sprite.addChild(t);var r=0,s=function(){r++,r>=o.length&&(r=0),t.texture=o[r];var i=egret.Tween.get(t);i.to({alpha:1},10),i.wait(500),i.call(s,e)};s()},n.onShowElement=function(){var e=this,t=this.createBitmapByName("baping_png");t.x=267+t.width/2,t.y=392+t.height/2,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,this.step1Sprite.addChild(t),t.addEventListener(egret.Event.ENTER_FRAME,function(){t.rotation+=e._iDirection_bp*e._iSpeed,t.rotation>10?e._iDirection_bp=-1:t.rotation<-10&&(e._iDirection_bp=1)},this.step1Sprite);var i=this.createBitmapByName("gungun_png");i.y=230+i.width/2,i.x=267+i.height/2,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,this.step1Sprite.addChild(i),i.addEventListener(egret.Event.ENTER_FRAME,function(){i.rotation+=e._iDirection_gg*e._iSpeed,i.rotation>10?e._iDirection_gg=-1:i.rotation<-10&&(e._iDirection_gg=1)},this.step1Sprite);var n=this.createBitmapByName("penzi_png");n.y=567+n.height/2,n.x=94+n.width/2,n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,this.step1Sprite.addChild(n),n.addEventListener(egret.Event.ENTER_FRAME,function(){n.rotation+=e._iDirection_pz*e._iSpeed,n.rotation>10?e._iDirection_pz=-1:n.rotation<-10&&(e._iDirection_pz=1)},this.step1Sprite);var o=this.createBitmapByName("text_png");o.y=717+o.height,o.x=208,o.alpha=0,this.step1Sprite.addChild(o);var r=egret.Tween.get(o);r.to({alpha:1,y:717},1e3,egret.Ease.sineInOut)},n.onClick=function(e){},n.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},n.startAnimation=function(e){},n.changeDescription=function(e,t){e.textFlow=t},t.STEP_ROT=10,t}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var Main1=function(e){function t(){e.call(this),this.mainHeight=this.width,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onAddToStage=function(e){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},n.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},n.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},n.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},n.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},n.createGameScene=function(){console.log("Hellow World");var e=this.createBitmapByName("bg");e.x=0,e.y=0,this.addChild(e),console.log("backimg index = "+this.getChildIndex(e));var t=this.createBitmapByName("logo"),i=new egret.Sprite;i.x=13,i.y=17,i.addChild(t),this.addChildAt(i,2),console.log("logoSpirte index = "+this.getChildIndex(i));var n=this.createBitmapByName("tv");n.x=0,n.y=56,this.addChild(n),console.log("tv index = "+this.getChildIndex(n));var o=this.createBitmapByName("button");o.x=187,o.y=770,this.addChild(o),console.log("button index = "+this.getChildIndex(o)),this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){var t=i.getChildAt(0);t.x=e.localX,t.y-e.localY},this),RES.getResAsync("description_json",this.startAnimation,this)},n.onClick=function(e){},n.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},n.startAnimation=function(e){},n.changeDescription=function(e,t){e.textFlow=t},t}(egret.DisplayObjectContainer);egret.registerClass(Main1,"Main1");var Main2=function(e){function t(){e.call(this),this.mainHeight=this.width,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onAddToStage=function(e){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},n.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},n.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},n.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},n.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},n.createGameScene=function(){var e=new egret.Sprite;this.addChild(e),e.x=10;var t=new egret.Sprite;t.graphics.beginFill(16711680),t.graphics.drawRect(0,0,100,100),t.graphics.endFill(),t.x=50,t.name="sprite1",e.addChild(t);var i=new egret.Sprite;i.graphics.beginFill(65280),i.graphics.drawRect(0,0,100,100),i.graphics.endFill(),i.x=100,i.y=50,i.name="sprite2",e.addChild(i);var n=e.getChildByName("sprite2");n.alpha=.5,RES.getResAsync("description_json",this.startAnimation,this)},n.onClick=function(e){},n.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},n.startAnimation=function(e){},n.changeDescription=function(e,t){e.textFlow=t},t}(egret.DisplayObjectContainer);egret.registerClass(Main2,"Main2");